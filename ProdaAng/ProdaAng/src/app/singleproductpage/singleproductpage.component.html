<br>
<br>
<br>
<link rel='stylesheet' href='https://sachinchoolur.github.io/lightslider/dist/css/lightslider.css'>
<div class="container-fluid mt-2 mb-3">
   <div class="row no-gutters">
      <div class="col-md-5 pr-2">
         <div class="card">
            <div class="demo">
               <!--<ul id="lightSlider">
                  <li data-thumb="https://i.imgur.com/KZpuufK.jpg"> <img src="{{product.pictureUrl}}" /> </li>
                  <li data-thumb="https://i.imgur.com/KZpuufK.jpg"> <img src="{{product.pictureUrl}}" /> </li>
                  <li data-thumb="https://i.imgur.com/KZpuufK.jpg"> <img src="{{product.pictureUrl}}" /> </li>
               </ul>-->


               <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img class="d-block w-100" src="{{product.pictureUrl}}" alt="First slide">
                    </div>
                    <div class="carousel-item" *ngFor="let picture of album">
                      <img class="d-block w-100" src="https://localhost:44327/{{picture}}" >
                    </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>


            </div>
         </div>
         <div class="card mt-2">
            <h6>Comments</h6>
            <hr>
            <div class="comment-section">

               <style>
                  textarea {
                    width: 100%;
                    height: 80px;
                    font-size: 16px;
                    background-color: #f7f7f7;
                    border: 1px solid #ccc;
                    padding: 10px;
                    box-sizing: border-box;
                  }
                </style>


               <div class="comment-formadd" *ngIf="token!=null">
                  <div class="d-flex flex-row align-items-center" >

                     <img src="../../assets/img/avatar.jpg" class="rounded-circle profile-image" > 

                     <div class="modal-body">
                        <form [formGroup]="form">
                          <div class="row">
                      
                           <!-- <div class="form-group pt-3" [class.error]="form.controls['id'].dirty && form.hasError('required','id')">
                              <div class="input-field">
                                <span class="fa fa-lock p-2"></span>
                                <input formControlName="id" type="number" placeholder="id" hidden>
                              </div>
                              <small *ngIf= "form.controls['id'].dirty && form.hasError('required','id')" class="text-danger">*id is required</small>
                      
   
                            </div>
                      
                      
                      
                            <div class="form-group pt-3" [class.error]="form.controls['email'].dirty && form.hasError('required','email')">
                              <div class="input-field">
                                <span class="fa fa-lock p-2"></span>
                                <input formControlName="email" type="text" placeholder="email" hidden>
                              </div>
                              <small *ngIf= "form.controls['email'].dirty && form.hasError('required','email')" class="text-danger" >*email is required</small>
                      
   
                            </div>-->
                      
                      
                      
                      
                            <div class="form-group pt-3" [class.error]="form.controls['content'].dirty && form.hasError('required','content')">
                              <div class="input-field">
                                <span class="fa fa-lock p-2"></span>
                                <textarea formControlName="content" type="text" placeholder="Add Your comment" ></textarea>
                              </div>
                              <!--<small *ngIf= "form.controls['content'].dirty && form.hasError('required','content')" class="text-danger">*content is required</small>-->
                      
                             
                            </div>
                      
                      
                            <!--<div class="form-group pt-3" [class.error]="form.controls['productID'].dirty && form.hasError('required','productID')">
                              <div class="input-field">
                                <span class="fa fa-lock p-2"></span>
                                <input formControlName="productID" type="text" placeholder="productID" hidden>
                              </div>
                              <small *ngIf= "form.controls['productID'].dirty && form.hasError('required','productID')" class="text-danger">*productID is required</small>
                      
                             
                            </div>-->
                      
                      
                            
                      
                          </div>
                          <div class="d-flex justify-content-end mt-3">
                              <button class="btn btn-success" (click)="addCOMMENT()">Add comment</button>
                          </div>
                        </form>
                      </div>


                  </div>

                  
                   


               </div>













               <div class="d-flex justify-content-between align-items-center" *ngFor="let comment of product.comments">
                  <div class="d-flex flex-row align-items-center" >
                     <img src="../../assets/img/avatar.jpg" class="rounded-circle profile-image" > 
                     <div class="d-flex flex-column ml-1 comment-profile" >
                        <a href="/sellerInfo/{{comment.email}}">
                           <span class="username"><strong>{{comment.dispname}}</strong> </span> 
                        </a>
                        <span class="username">{{comment.content}}</span> 
                     </div>
                  </div>
                  <br>
                  <br>
               </div>
               
            </div>
         </div>
      </div>
      <div class="col-md-7">
         <div class="card">
            <div class="d-flex flex-row align-items-center">
               <div class="p-ratings"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div>
               
            </div>
            <div class="about">
               <span class="font-weight-bold">{{product.name}} </span> 
               <h4 class="font-weight-bold">{{product.price}} EGP</h4>
            </div>
            <div class="buttons">  <a class="btn btn-warning btn-long buy" href="/chat/userid/{{chatid.id}}" >Chat with seller</a> </div>
            <hr>
            <div class="product-description">
               <div><span class="font-weight-bold">Catigory:</span><span><a href="/catigory/{{product.productCategoryId}}">{{product.productCategory}}</a> </span></div>
               
               
               <div class="mt-2">
                  <span class="font-weight-bold">Description</span> 
                  <p>{{product.description}}</p>
                  
               </div>
               <div class="mt-2"> <span class="font-weight-bold">About the seller</span> </div>
               <div class="d-flex flex-row align-items-center">
                  <img src="../../assets/img/avatar.jpg" class="rounded-circle store-image" > 
                  <div class="d-flex flex-column ml-1 comment-profile">
                     <span class="username"><a href="/sellerInfo/{{product.publisher}}">{{product.publiserName}}</a></span> 
                  </div>
               </div>
            </div>
         </div>
         <div class="card mt-2">
            <span>Similar items:</span> 
            <div class="similar-products mt-2 d-flex flex-row">

               <div *ngFor="let prod of filtrprod">
               <div class="card border p-1" style="width: 9rem;margin-right: 3px;" *ngIf="prod.id !=id" >
                  <a href="/productdetailes/{{prod.id}}">
                     <img src="{{prod.pictureUrl}}" class="card-img-top" alt=""> 
                  </a>
                  <div class="card-body">
                     <h6 class="card-title">{{prod.price}} EGP</h6>
                  </div>
               </div>
            </div>

               <!--Repeat this many times from catigory-->
            </div>
         </div>
      </div>
   </div>
</div>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>
<script src='https://sachinchoolur.github.io/lightslider/dist/js/lightslider.js'></script>
<script> $('#lightSlider').lightSlider({ gallery: true, item: 1, loop: true, slideMargin: 0, thumbItem: 9 });</script>